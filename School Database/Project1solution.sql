-- CREATING A DATABASE
CREATE DATABASE SCHOOL_DB;

USE SCHOOL_DB

GO
-- CREATING TABLE STUDENT
CREATE TABLE STUDENT (SID INT NOT NULL,FNAME VARCHAR(30),
LNAME VARCHAR(30) NOT NULL,DOB VARCHAR(5) NOT NULL,
STUDCITY VARCHAR(30) NOT NULL, STATERESIDENCE VARCHAR(30) NOT NULL,
INSTR_ID VARCHAR(6)NOT NULL, PHONE VARCHAR(10) NOT NULL,
GENDER VARCHAR(1)NOT NULL);

CREATE TABLE INSTRUCTOR (INSTR_ID VARCHAR(15) NOT NULL, 
FNAME VARCHAR(30) NOT NULL,
LNAME VARCHAR(30) NOT NULL, COURSE_ID VARCHAR(6) NOT NULL);

CREATE TABLE COURSE (COURSE_ID VARCHAR(6) NOT NULL, 
COURSE_NAME VARCHAR(20) NOT NULL,COURSE_CREDIT INT NOT NULL,
CLASS_SIZE INT NOT NULL);

CREATE TABLE STUDENTLEAD (STUD_EXEC_ID INT NOT NULL,
FNAME VARCHAR(30) NOT NULL, LNAME VARCHAR(30) NOT NULL,
SID INT NOT NULL, STUDTITLE VARCHAR(30) NOT NULL);

CREATE TABLE STUD_GRADE (LETTER_GRADE VARCHAR(1) NOT NULL,
SCORE INT NOT NULL);

DROP TABLE STUD_GRADE;

CREATE TABLE GRADE (LETTER_GRADE VARCHAR(1) NOT NULL,
SCORE INT NOT NULL);

CREATE TABLE STUD_GRADE (SID INT NOT NULL, LETTER_GRADE VARCHAR(1) NOT NULL,
COURSE_ID VARCHAR(6) NOT NULL,INSTR_ID VARCHAR(6) NOT NULL);

--ASSIGNING PK CONSTRAINT TO THE TABLES 
ALTER TABLE STUDENT
ADD CONSTRAINT PK_SID_STUDENT PRIMARY KEY (SID);

ALTER TABLE INSTRUCTOR
ADD CONSTRAINT PK_INSTR_ID_INSTRUCTOR PRIMARY KEY (INSTR_ID);

ALTER TABLE COURSE
ADD CONSTRAINT PK_COURSE_ID_COURSE PRIMARY KEY (COURSE_ID);

ALTER TABLE STUDENTLEAD
ADD CONSTRAINT PK_STUD_EXEC_ID_STUDENTLEAD PRIMARY KEY (STUD_EXEC_ID);

ALTER TABLE GRADE
ADD CONSTRAINT PK_LETTER_GRADE_GRADE PRIMARY KEY (LETTER_GRADE);

ALTER TABLE STUD_GRADE
ADD CONSTRAINT PK_SID_STUD_GRADE PRIMARY KEY (SID);

--ASSIGNING FK CONSTRAINT TO THE TABLES 

ALTER TABLE INSTRUCTOR 
ADD CONSTRAINT FK_COURSE_ID_INSTRUCTOR FOREIGN KEY (COURSE_ID)
REFERENCES COURSE(COURSE_ID);

ALTER TABLE STUDENT 
ADD CONSTRAINT FK_INSTR_ID_STUDENT FOREIGN KEY (INSTR_ID)
REFERENCES INSTRUCTOR(INSTR_ID);

ALTER TABLE STUDENTLEAD
ADD CONSTRAINT FK_SID_STUDENTLEAD FOREIGN KEY (SID)
REFERENCES STUDENT(SID);

ALTER TABLE STUD_GRADE
ADD CONSTRAINT FK_LETTER_GRADE_STUD_GRADE FOREIGN KEY (LETTER_GRADE)
REFERENCES GRADE(LETTER_GRADE);

ALTER TABLE STUD_GRADE
ADD CONSTRAINT FK_COURSE_ID_STUD_GRADE FOREIGN KEY (COURSE_ID)
REFERENCES COURSE(COURSE_ID);

ALTER TABLE STUD_GRADE
ADD CONSTRAINT FK_INSTR_ID_STUD_GRADE FOREIGN KEY (INSTR_ID)
REFERENCES INSTRUCTOR(INSTR_ID);

***********
ALTER TABLE STUDENT
DROP FK_INSTR_ID_STUDENT;

ALTER TABLE STUD_GRADE
DROP FK_INSTR_ID_STUD_GRADE;

ALTER TABLE INSTRUCTOR
DROP PK_INSTR_ID_INSTRUCTOR;

ALTER TABLE INSTRUCTOR 
DROP COLUMN INSTRID;

ALTER TABLE INSTRUCTOR 
ADD INSTR_ID VARCHAR(15) NOT NULL;

ALTER TABLE STUD_GRADE
ALTER COLUMN INSTR_ID VARCHAR(15) NOT NULL;

ALTER TABLE STUDENT
ALTER COLUMN INSTR_ID VARCHAR(15) NOT NULL;

--SCHOOL IT DEPT DAY TO DAY WORK
ALTER TABLE GRADE
ALTER COLUMN SCORE VARCHAR(20) NOT NULL;

--INSERTING DATA INTO TABLE
TABLE GRADE:
INSERT INTO GRADE VALUES
('A', '90 - 100'), 
('B', '85 – 89'), 
('C', '80 - 84'), 
('D', '70 – 79'),
('E', '60 - 69'), 
('F', '0 - 59');

TABLE COURSE:
INSERT INTO COURSE VALUES
('Soc101','Fundamentals of Sociology','3','30'), 
('Mat102','Elementary Calculus','3','25'),
('His304','Intermediate US History','3','15'), 
('Soc401', 'Advanced Sociology','3','40'),
('Phi400', 'Advanced Philosophy','3','20'); 

ALTER TABLE COURSE
ALTER COLUMN COURSE_NAME VARCHAR(35)NOT NULL;

TABLE INSTRUCTOR:
INSERT INTO INSTRUCTOR VALUES
('In10001','Adeleye','Adewuyi','Mat102'), 
('In10002','Martin','Gold','Phi400'),
('In10003','Fatiu','Ahmed','Soc101'), 
('In10004','Bharath','Mandadi','His304'),
('In10005','Eric','Forson','Soc401'); 

ALTER TABLE INSTRUCTOR
ALTER COLUMN INSTRID VARCHAR(15) NOT NULL;

ALTER TABLE INSTRUCTOR
DROP COLUMN INSTRID;

DROP TABLE INSTRUCTOR;

TABLE STUDENT:
INSERT INTO STUDENT VALUES 
('1','Joseph','Ahene','11/25/1980','Baltimore','Maryland','In10004','4321053421','M'), 
('2','Precious','Owusu','09/11/1982','Columbia','Maryland','In10003','4321762243','F'),
('3','Eni','Edo','01/06/1979','Bronx','New York', 'In10002','5011053421','F'), 
('4','Felix','Emeka','12/01/1984','Newark','New Jersey','In10005','7011762243','M'),
('5','Mercy','Johnson','04/20/1981','Wilmington','Delaware','In10005','3011053421','F'), 
('6','Lilian','Asong','08/19/1986','Owings Mills','Maryland','In10003','4321761432', 'F'),
('7', 'Prince', 'Williams', '06/04/1989', 'Silver Spring', 'Maryland', 'In10004', '4324432211','M'), 
('8','Grace', 'Bonnie', '05/13/1985', 'Knoxville', 'Tennessee', 'In10001', '8651762243', 'F'), 
('9', 'Leomie', 'Titus', '05/20/1986', 'Nashville', 'Tennessee', 'In10001', '8651053421', 'F'), 
('10', 'Magic','Johnson', '09/01/1978', 'Falls Church', 'Virginia', 'In10002', '7241762243', 'M'), 
('11', 'Henry', 'Edwards', '02/12/1983', 'Boston', 'Massachusetts', 'In10002', '9031053421', 'M'), 
('12', 'George', 'Phillips', '12/04/1980', 'San Francisco', 'California', 'In10001', '4631762241', 'M'),
('13', 'Frederick', 'Benson', '01/01/1978', 'Wilmington', 'Delaware', 'In10003', '3011222411', 'M'), 
('14', 'Christy', 'Jones', '10/10/1991', 'Frederick', 'Maryland', 'In10005', '4321764444', 'F'),
('15', 'Princess', 'Brown', '06/04/1989', 'Tulsa', 'Oklahoma', 'In10001', '4234432211', 'F'), 
('16', 'Hillary', 'Morgan', '11/13/1990', 'Tampa', 'Florida', 'In10001', '6411765432', 'F');

ALTER TABLE STUDENT
ALTER COLUMN DOB VARCHAR(15) NOT NULL;

SELECT* FROM STUDENT

TABLE STUDENT_GRADE
INSERT INTO STUD_GRADE(SID, LETTER_GRADE, COURSE_ID)
VALUES
('1','A','Soc401'),
('2','B','Phi400'),
('3','B','His304'),
('4','A','Mat102'),
('5','C','Soc101'), 
('6','D','His304'),
('7','B','Phi400'), 
('8','A','Mat102'),
('9','C','Soc401'), 
('10','A','Mat102'),
('11','D','His304'), 
('12','F','Soc101'),
('13','A','Mat102'), 
('14','A','His304'),
('15','B','Mat102'),
('16','C','His304'); 

ALTER TABLE STUD_GRADE
ALTER COLUMN INSTR_ID VARCHAR(15) NULL;

TABLE STUDENTLEAD:
INSERT INTO STUDENTLEAD(SID, STUD_EXEC_ID, STUDTITLE)
VALUES
('7','100','President'), 
('2','101','Vice President'), 
('4','103','Secretary'), 
('3','104','Treasurer'),
('11','105','Advisor'), 
('16','106','Organizer');

SELECT * FROM STUDENTLEAD

ALTER TABLE STUDENTLEAD
ALTER COLUMN FNAME VARCHAR(30);

ALTER TABLE STUDENTLEAD
ALTER COLUMN LNAME VARCHAR(30);

--UPDATING A RECORD OF A STUDENT
UPDATE STUDENT
SET LNAME = 'BASONG'
WHERE SID = '6';

UPDATE STUDENTLEAD
SET FNAME=STUDENT.FNAME
FROM STUDENT,STUDENTLEAD
WHERE STUDENTLEAD=STUDENET.SID;

UPDATE STUD_GRADE
SET INSTR_ID=INSTRUCTOR.INSTR_ID
FROM STUD_GRADE, INSTRUCTOR
WHERE STUD_GRADE.COURSE_ID=INSTRUCTOR.COURSE_ID;

SELECT* FROM STUD_GRADE